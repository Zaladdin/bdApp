#!/bin/bash

# ะกะบัะธะฟั ะดะปั ะดะตะฟะปะพั ะฝะฐ Vercel ั ะฟัะฐะฒะธะปัะฝัะผะธ ะฝะฐัััะพะนะบะฐะผะธ

echo "๐ ะะฐัะธะฝะฐะตะผ ะดะตะฟะปะพะน ะฝะฐ Vercel..."

# ะัะพะฒะตััะตะผ, ัััะฐะฝะพะฒะปะตะฝ ะปะธ Vercel CLI
if ! command -v vercel &> /dev/null; then
    echo "โ Vercel CLI ะฝะต ัััะฐะฝะพะฒะปะตะฝ. ะฃััะฐะฝะพะฒะธัะต: npm i -g vercel"
    exit 1
fi

# ะัะพะฒะตััะตะผ ะฐะฒัะพัะธะทะฐัะธั
if ! vercel whoami &> /dev/null; then
    echo "๐ ะัะพะดะธะผ ะฒ Vercel..."
    vercel login
fi

# ะกะพะฑะธัะฐะตะผ ะฟัะพะตะบั
echo "๐ฆ ะกะพะฑะธัะฐะตะผ ะฟัะพะตะบั..."
npm run build

# ะะตะฟะปะพะน ั ะฟัะฑะปะธัะฝัะผ ะดะพัััะฟะพะผ
echo "๐ ะะตะฟะปะพะธะผ ั ะฟัะฑะปะธัะฝัะผ ะดะพัััะฟะพะผ..."
vercel --prod --public --name birthday-organizer

echo "โ ะะตะฟะปะพะน ะทะฐะฒะตััะตะฝ!"
echo "๐ ะัะพะฒะตัััะต URL ะฒ ะฒัะฒะพะดะต ะฒััะต"
echo "๐งช ะะปั ะฟัะพะฒะตัะบะธ ะทะฐะฟัััะธัะต: npm run check-deploy <URL>"
